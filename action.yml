name: 'Hello World'
description: 'Greet someone and record the time'
inputs:
  docker-image-tag:
    # @see https://hub.docker.com/r/datadog/ci/tags
    description: 'image tag of datadog/ci'
    default: 'latest'
  service-name:
    description: 'service name in datadog'
    required: true
  datadog-env:
    description: 'env in datadog'
  started-at:
    description: 'start datetime of deploy'
  finished-at:
    description: 'finished datetime of deploy'
    default: "$(date +%s)"
  git-repository-url:
    description: 'url of target repository'
  git-commit-sha:
    description: ''


runs:
  using: 'docker'
  image: "docker://datadog/ci:latest"
  args:
    - dora
    - deployment
    - --service
    - "${{ inputs.service-name }}"
    - --env
    - "${{ inputs.datadog-env }}"
    - --started-at"
    - "${{ inputs.started-at }}"
    - --finished-at
    - "${{ inputs.finished-at }}"
    - --git-repository-url
    - "${{ inputs.git-repository-url }}"
    - --git-commit-sha
    - "${{ inputs.git-commit-sha }}"

